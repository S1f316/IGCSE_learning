{% extends "base.html" %}

{% block title %}IGCSE Mathematics 0580{% endblock %}

{% block styles %}
<style>
    .reset-button {
        display: block;
        margin: 20px auto;
        padding: 10px 15px;
        background-color: #dc3545;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
    }
    
    .reset-button:hover {
        background-color: #c82333;
    }
</style>
{% endblock %}

{% block content %}
<header>
    <h1>IGCSE Mathematics 0580</h1>
    <p>åŸºäºFSRSç®—æ³•çš„è‡ªé€‚åº”å­¦ä¹ ç³»ç»Ÿ</p>
</header>

<main>
    <div class="card">
        <div class="options">
            <a href="{{ url_for('learn') }}" class="option">
                <div class="option-icon">ğŸ“š</div>
                <h3>å­¦ä¹ æ–°å†…å®¹</h3>
                <p>æµè§ˆå’Œå­¦ä¹ è¯¾ç¨‹çš„å„ä¸ªå•å…ƒ</p>
            </a>
            <a href="{{ url_for('review') }}" class="option">
                <div class="option-icon">ğŸ”„</div>
                <h3>å¤ä¹ å†…å®¹</h3>
                <p>æ ¹æ®FSRSç®—æ³•å®‰æ’çš„å¤ä¹ è®¡åˆ’</p>
                {% if due_cards_count > 0 %}
                <div class="badge">{{ due_cards_count }}</div>
                {% endif %}
            </a>
            <a href="{{ url_for('word_stats') }}" class="option">
                <div class="option-icon">ğŸ“Š</div>
                <h3>å•è¯çŠ¶æ€</h3>
                <p>æŸ¥çœ‹å·²å­¦ä¹ å•è¯çš„è®°å¿†çŠ¶æ€å’Œæ›²çº¿</p>
            </a>
            <a href="{{ url_for('daily_plan') }}" class="option">
                <div class="option-icon">ğŸ“…</div>
                <h3>ä»Šæ—¥è®¡åˆ’</h3>
                <p>æŸ¥çœ‹ä»Šæ—¥å¾…å®Œæˆçš„å­¦ä¹ ä»»åŠ¡</p>
                {% if total_tasks > 0 %}
                <div class="badge">{{ completed_tasks }}/{{ total_tasks }}</div>
                {% endif %}
            </a>
            <a href="{{ url_for('fsrs_analytics') }}" class="option">
                <div class="option-icon">ğŸ“ˆ</div>
                <h3>FSRSåˆ†æ</h3>
                <p>æŸ¥çœ‹å­¦ä¹ æ•°æ®åˆ†æå’Œè®°å¿†æ›²çº¿</p>
            </a>
        </div>
        
        <button id="resetButton" class="reset-button">é‡ç½®ä»Šæ—¥è¿›åº¦</button>
    </div>
    
    <div class="card info-card">
        <h2>å…³äºFSRSç®—æ³•</h2>
        <p>FSRS (Free Spaced Repetition Scheduler) æ˜¯ä¸€ç§å…ˆè¿›çš„é—´éš”é‡å¤ç®—æ³•ï¼Œå®ƒé€šè¿‡åˆ†æä½ çš„è®°å¿†æ¨¡å¼ï¼Œä¸ºæ¯å¼ å¡ç‰‡è®¡ç®—æœ€ä½³çš„å¤ä¹ æ—¶é—´ã€‚</p>
        <p>æ¯æ¬¡å¤ä¹ åï¼Œä½ éœ€è¦æ ¹æ®è®°å¿†æƒ…å†µè¿›è¡Œè¯„åˆ†ï¼š</p>
        <ul>
            <li><strong>é‡æ¥ (Again)</strong>ï¼šå®Œå…¨ä¸è®°å¾—</li>
            <li><strong>å›°éš¾ (Hard)</strong>ï¼šè®°å¾—ï¼Œä½†èŠ±äº†å¾ˆé•¿æ—¶é—´</li>
            <li><strong>è‰¯å¥½ (Good)</strong>ï¼šè®°å¾—ï¼Œä½†éœ€è¦ä¸€äº›æ€è€ƒ</li>
            <li><strong>ç®€å• (Easy)</strong>ï¼šç«‹å³è®°èµ·ï¼Œæ¯«ä¸è´¹åŠ›</li>
        </ul>
        <p>ç³»ç»Ÿä¼šæ ¹æ®ä½ çš„è¯„åˆ†è°ƒæ•´æ¯å¼ å¡ç‰‡çš„å¤ä¹ é—´éš”ï¼Œä½¿ä½ çš„å­¦ä¹ æ•ˆç‡æœ€å¤§åŒ–ã€‚</p>
    </div>
</main>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const resetButton = document.getElementById('resetButton');
        
        resetButton.addEventListener('click', function() {
            if (confirm('ç¡®å®šè¦é‡ç½®ä»Šæ—¥å­¦ä¹ å’Œå¤ä¹ è¿›åº¦å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰ä»Šæ—¥çš„å­¦ä¹ è®°å½•ã€‚')) {
                fetch('/reset_session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({})
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        alert('è¿›åº¦å·²é‡ç½®');
                        window.location.reload();
                    } else {
                        alert('é‡ç½®å¤±è´¥ï¼Œè¯·ç¨åå†è¯•');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('é‡ç½®å¤±è´¥ï¼Œè¯·ç¨åå†è¯•');
                });
            }
        });
    });
</script>
{% endblock %} 